namespace = human_fallen_empires

@tier1materialreward = 6
@tier1materialmin = 100
@tier1materialmax = 500
@tier2materialreward = 12
@tier2materialmin = 150
@tier2materialmax = 1000
@tier3materialreward = 18
@tier3materialmin = 250
@tier3materialmax = 1500
@tier4materialreward = 24
@tier4materialmin = 350
@tier4materialmax = 2000

@tier1influencereward = 6
@tier1influencemin = 40
@tier1influencemax = 100
@tier2influencereward = 12
@tier2influencemin = 80
@tier2influencemax = 175
@tier3influencereward = 18
@tier3influencemin = 125
@tier3influencemax = 250
@tier4influencereward = 24
@tier4influencemin = 150
@tier4influencemax = 300

@tier1researchreward = 6
@tier1researchmin = 60
@tier1researchmax = 150
@tier2researchreward = 12
@tier2researchmin = 90
@tier2researchmax = 250
@tier3researchreward = 18
@tier3researchmin = 120
@tier3researchmax = 350
@tier4researchreward = 24
@tier4researchmin = 150
@tier4researchmax = 500

## spawn human fallen empires
country_event = {
	id = human_fallen_empires.1
	hide_window = yes
	#is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		if = {
			limit = {
				any_country = {
					or = {
						has_country_flag = human_1
						has_country_flag = human_2
						and = {
							is_ai = no
							species_portrait = human
						}
					}
				}
			}
			every_country = {
				limit = {
					or = {
						has_country_flag = human_1
						has_country_flag = human_2
						species_portrait = human
					}
				}
				set_country_flag = human_fallen_empires_marked_as_human
			}
			if = {
				limit = {
					any_country = {
						has_country_flag = human_fallen_empires_marked_as_human
						is_ai = no
					}
				}
				random_country = {
					limit = {
						has_country_flag = human_fallen_empires_marked_as_human
						is_ai = no
					}
					species = { save_event_target_as = human_fallen_empires_human_species }
				}
				else = {
					random_country = {
						limit = {
							has_country_flag = human_fallen_empires_marked_as_human
						}
						species = { save_event_target_as = human_fallen_empires_human_species }
					}
				}
			}
			# make humans undivided
			every_country = {
				limit = {
					has_country_flag = human_fallen_empires_marked_as_human
					species = { not = { is_same_value = event_target:human_fallen_empires_human_species } }
				}
				species = { set_species_identity = event_target:human_fallen_empires_human_species }
			}
			create_species = {
				name = Human
				plural = Humans
				class = "MAM"
				portrait = "human_egypt_fallen_empire"
				traits = {
					ideal_planet_class = "pc_continental"
					trait = "trait_extremely_adaptive"
					trait = "trait_slow_breeders"
					trait = "trait_venerable"
				}
				immortal = yes
			}
			last_created_species = {
				set_species_identity = event_target:human_fallen_empires_human_species
				save_event_target_as = human_fallen_empires_egypt_species
			}
			create_species = {
				name = Human
				plural = Humans
				class = "MAM"
				portrait = "human"
				traits = {
					ideal_planet_class = "pc_continental"
					trait = "trait_intelligent"
					trait = "trait_thrifty"
					trait = "trait_strong"
					trait = "trait_enduring"
				}
			}
			last_created_species = {
				set_species_identity = event_target:human_fallen_empires_human_species
				save_event_target_as = human_fallen_empires_future_species
			}
			else = {
				create_species = {
					name = Human
					plural = Humans
					class = "MAM"
					portrait = "human_egypt_fallen_empire"
					traits = {
						ideal_planet_class = "pc_continental"
						trait = trait_extremely_adaptive
						trait = trait_slow_breeders
						trait = trait_venerable
					}
				}
				last_created_species = { save_event_target_as = human_fallen_empires_egypt_species }
				create_species = {
					name = Human
					plural = Humans
					class = "MAM"
					portrait = "human"
					traits = {
						ideal_planet_class = "pc_continental"
						trait = trait_intelligent
						trait = trait_thrifty
						trait = trait_solitary
					}
				}
				last_created_species = {
					set_species_identity = event_target:human_fallen_empires_egypt_species
					save_event_target_as = human_fallen_empires_future_species
				}
			}
		}
		create_species = {
			name = Ahet
			plural = Ahet
			class = "REP"
			portrait = random
			traits = {
				ideal_planet_class = "pc_continental"
				trait = trait_slow_breeders
				trait = random_traits
			}
		}
		last_created_species = { save_event_target_as = human_fallen_empires_ahet_species }
		create_species = {
			name = Varelse
			plural = Varelse
			class = "REP"
			portrait = random
			traits = {
				ideal_planet_class = "pc_desert"
				trait = trait_industrious
				trait = trait_natural_engineers
				trait = trait_strong
				trait = trait_repugnant
			}
		}
		last_created_species = { save_event_target_as = human_fallen_empires_varelse_species }
		if = {
			limit = {
				not = { has_global_flag = human_fallen_empires_future_spawned }
			}
			random_rim_system  = {
				limit = {
					nor = {
						any_neighbor_system = {
							exists = space_owner
							any_neighbor_system = {
								exists = space_owner
								any_neighbor_system = {
									exists = space_owner
									any_neighbor_system = {
										exists = space_owner
										any_neighbor_system = {
											exists = space_owner
											any_neighbor_system = {
												exists = space_owner
											}
										}
									}
								}
							}
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				spawn_system = { initializer = "human_fallen_empires_future" }
			}
			set_global_flag = human_fallen_empires_future_spawned
		}
		if = {
			limit = {
				not = {	has_global_flag = human_fallen_empires_egypt_spawned }
			}
			random_system = {
				limit = {
					nor = {
						any_neighbor_system = {
							exists = space_owner
							any_neighbor_system = {
								exists = space_owner
								any_neighbor_system = {
									exists = space_owner
									any_neighbor_system = {
										exists = space_owner
										any_neighbor_system = {
											exists = space_owner
											any_neighbor_system = {
												exists = space_owner
											}
										}
									}
								}
							}
						}
						exists = space_owner
						is_fe_cluster = yes
					}
				}
				save_event_target_as = ra_home
				spawn_system = { initializer = "human_fallen_empires_egypt" }
				spawn_system = {
					min_distance = 5
					max_distance = 15
					initializer = "human_fallen_empires_hope"
				}
				spawn_system = {
					min_distance = 10
					max_distance = 20
					initializer = "human_fallen_empires_gift"
				}
				spawn_system = {
					min_distance = 10
					max_distance = 20
					initializer = "human_fallen_empires_ban"
				}
				random_system = {
					limit = {
						distance = {
							source = event_target:ra_home
							min_distance = 30
							max_distance = 100
						}
						has_owner = no
					}
					spawn_system = { initializer = "human_fallen_empires_memorial_01" }
				}
				random_system = {
					limit = {
						distance = {
							source = event_target:ra_home
							min_distance = 50
							max_distance = 150
						}
						has_owner = no
					}
					spawn_system = { initializer = "human_fallen_empires_memorial_02" }
				}
				random_system = {
					limit = {
						distance = {
							source = event_target:ra_home
							min_distance = 80
							max_distance = 200
						}
						has_owner = no
					}
					spawn_system = { initializer = "human_fallen_empires_memorial_03" }
				}
				random_system = {
					limit = {
						distance = {
							source = event_target:ra_home
							min_distance = 120
							max_distance = 250
						}
						has_owner = no
					}
					spawn_system = { initializer = "human_fallen_empires_memorial_04" }
				}
				random_system = {
					limit = {
						distance = {
							source = event_target:ra_home
							min_distance = 200
							max_distance = 300
						}
						has_owner = no
					}
					spawn_system = { initializer = "human_fallen_empires_varelse" }
				}
			}
			random_system = {
				limit = { has_owner = no }
				spawn_system = { initializer = "human_fallen_empires_ahet" }
			}
			random_system = {
				limit = { has_owner = no }
				spawn_system = { initializer = "human_fallen_empires_ahet_2" }
			}
			set_global_flag = human_fallen_empires_egypt_spawned
		}
	}
}

#country_event = {
#	id = human_fallen_empires.4
#	hide_window = yes
#	is_triggered_only = yes
#
#	immediate = {
#		every_owned_planet = {
#		every_tile = {
#			set_blocker = tb_human_fallen_empires_radioactive_wasteland
#			}
#		}
#	}
#}

# contact with egypt
ship_event  = {
	id = human_fallen_empires.4
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		not = { has_global_flag = human_fallen_empires_egypt_in_expansion }
		from = {
			exists = space_owner 
			space_owner = {
				has_country_flag = human_fallen_empires_egypt
			}
		}
	}

	immediate = {
		from = {
			space_owner = {
				establish_communications = fromfrom
				save_event_target_as = egypt_empire
			}
		}
		fromfrom = {
			if = {
				limit = {
					is_ai = no
					nor = {
						has_global_flag = human_fallen_empires_egypt_in_expansion
						has_country_flag = human_fallen_empires_egypt_contacted
					}
				}
				country_event = {
					id = human_fallen_empires.5
				}
				set_country_flag = human_fallen_empires_egypt_contacted
			}
		}
	}
}

# Main dialoge egypt
country_event = {
	id = human_fallen_empires.5
	title = TRANSMISSION
	desc = {
		trigger = {
			hidden:root = {
				switch = {
					trigger = has_country_flag
					egp_wormhole = { text = human_fallen_empires.5.desc }
					default = { text = human_fallen_empires.5.desc.1 }
					egp_step1 = { text = human_fallen_empires.5.desc.2 }
					egp_step2 = { text = human_fallen_empires.5.desc.3 }
					egp_step3 = { text = human_fallen_empires.5.desc.4 }
					egp_step4 = { text = human_fallen_empires.5.desc.5 }
					egp_stepbadend = { text = human_fallen_empires.5.desc.6 }
				}
			}
		}
	}

	#show_sound = testtest
	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:egypt_empire
		planet_background = event_target:egypt_empire
		graphical_culture = event_target:egypt_empire
		city_level = event_target:egypt_empire
		room = event_target:egypt_empire
	}

	immediate = {

	}

	# step 0
	option = {
		name = human_fallen_empires.5.0.0
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				species_portrait = human
				has_country_flag = human_1
				has_country_flag = human_2
			}
			has_ethic = "ethic_fanatic_xenophobe"
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_stepbadend
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.1
		trigger = {
			any_country = {
				has_communications = root
				not = { is_same_value = root}
				has_country_flag = human_fallen_empires_future
			}
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.2
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_xenophobe"
			}
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.3
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				species_portrait = human
				has_country_flag = human_1
				has_country_flag = human_2
			}
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.4
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
			has_ethic = "ethic_fanatic_spiritualist"
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
		#добавить плюс к отношениям
	}
	option = {
		name = human_fallen_empires.5.0.5
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
			}
			has_ethic = "ethic_fanatic_militarist"
			fleet_power > 20000
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_stepbadend
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.0.6
		trigger = {
			nor = {
				has_country_flag = egp_step1
				has_country_flag = egp_step2
				has_country_flag = egp_step3
				has_country_flag = egp_step4
				has_country_flag = human_fallen_empires_marked_as_human
			}
			any_country = {
				has_communications = root
				not = { is_same_value = root}
				or = {
					is_country_type = default
					is_country_type = human_fallen_empire
					is_country_type = fallen_empire
					is_country_type = awakened_fallen_empire
				}
				or = {
					has_country_flag = human_fallen_empires_future
					has_country_flag = human_fallen_empires_marked_as_human
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_wormhole
			set_country_flag = egp_step1
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	# step 1
	option = {
		name = human_fallen_empires.5.1.0
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_militarist"
				has_ethic = "ethic_militarist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.1
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_xenophobe"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.2
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_materialist"
				has_ethic = "ethic_materialist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.3
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_individualist"
				has_ethic = "ethic_individualist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.4
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_pacifist"
				has_ethic = "ethic_pacifist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.5
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_xenophile"
				has_ethic = "ethic_xenophile"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.6
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_spiritualist"
				has_ethic = "ethic_spiritualist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.1.7
		trigger = {
			has_country_flag = egp_step1
			or = {
				has_ethic = "ethic_fanatic_collectivist"
				has_ethic = "ethic_collectivist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step1
			set_country_flag = egp_step2
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	# step 2
	option = {
		name = human_fallen_empires.5.2.0
		trigger = {
			has_country_flag = egp_step2
			or = {
				has_country_flag = human_1
				and = {
					any_system_within_border = {
						has_star_flag = sol
					}
					species_portrait = human
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.1
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_2
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = no
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.2
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_2
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.3
		trigger = {
			has_country_flag = egp_step2
			nor = {
				any_system = {
					has_star_flag = sol
					is_surveyed = {
						who = root
						status = yes
					}
				}
				has_country_flag = human_1
				has_country_flag = human_2
			}
			species_portrait = human
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.4
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_fallen_empires_marked_as_human
			any_country = {
				is_country_type = default
				has_communications = root
				not = { is_same_value = root}
		#		any_system_within_border = {
		#			has_star_flag = sol
		#		}
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.5
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_fallen_empires_marked_as_human
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = no
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.6
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_fallen_empires_marked_as_human
			any_system = {
				has_star_flag = sol
				has_star_flag = nuked_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.7
		trigger = {
			has_country_flag = egp_step2
			has_country_flag = human_fallen_empires_marked_as_human
			any_system = {
				has_star_flag = sol
				has_star_flag = primitive_sol
				is_surveyed = {
					who = root
					status = yes
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.2.8
		trigger = {
			has_country_flag = egp_step2
			or = {
				has_country_flag = human_fallen_empires_marked_as_human
				has_ethic = "ethic_fanatic_xenophile"
				has_ethic = "ethic_xenophile"
			}
			any_system = {
				has_star_flag = sol
				is_surveyed = {
					who = root
					status = no
				}
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step2
			set_country_flag = egp_step3
			country_event = {
				id = human_fallen_empires.5
			}
			begin_event_chain = {
				event_chain = "human_fallen_empires_find_sol_chain"
				target = root
			}
			random_system = {
				limit = {
					has_star_flag = sol
				}
				save_event_target_as = human_fallen_empires_sol
				set_star_flag = human_fallen_empires_sol_target
			}
			set_country_flag = human_fallen_empires_sol_search
			create_point_of_interest = {
				id = human_fallen_empires_sol.1
				name = "sol_1_poi"
				desc = sol_1_desc_neutral
				event_chain = human_fallen_empires_find_sol_chain
				location = event_target:human_fallen_empires_sol
			}
		}
	}
	#step 3
	option = {
		name = human_fallen_empires.5.3.0
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_militarist"
				has_ethic = "ethic_militarist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.1
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_xenophobe"
				has_ethic = "ethic_xenophobe"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.2
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_materialist"
				has_ethic = "ethic_materialist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.3
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_individualist"
				has_ethic = "ethic_individualist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.4
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_pacifist"
				has_ethic = "ethic_pacifist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.5
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_xenophile"
				has_ethic = "ethic_xenophile"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.6
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_spiritualist"
				has_ethic = "ethic_spiritualist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	option = {
		name = human_fallen_empires.5.3.7
		trigger = {
			has_country_flag = egp_step3
			or = {
				has_ethic = "ethic_fanatic_collectivist"
				has_ethic = "ethic_collectivist"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step3
			set_country_flag = egp_step4
			country_event = {
				id = human_fallen_empires.5
			}
		}
	}
	#step 4
	option = {
		name = human_fallen_empires.5.4.0
		trigger = {
			has_country_flag = egp_step4
			or = {
				has_ethic = "ethic_xenophile"
				has_ethic = "ethic_fanatic_xenophile"
			}
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:egypt_empire = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}

		#добавить бонус к счастью
	}
	option = {
		name = human_fallen_empires.5.4.1
		trigger = {
			has_country_flag = egp_step4
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:egypt_empire = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.5.4.2
		trigger = {
			has_country_flag = egp_step4
			has_country_flag = human_fallen_empires_marked_as_human
		}
		hidden_effect = {
			remove_country_flag = egp_step4
			event_target:egypt_empire = {
				set_closed_borders = {
					who = root
					status = yes
				}
			}
		}
	}
	#сделать бонусную ветку
}

# contact with future
ship_event  = {
	id = human_fallen_empires.6
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		from = {
			exists = space_owner 
			space_owner = {
				has_country_flag = human_fallen_empires_future
				not = { has_global_flag = human_fallen_empires_future_in_expansion }
			}
		}
	}

	immediate = {
		from = {
			space_owner = {
				establish_communications = fromfrom
				save_event_target_as = future_empire
			}
		}
		fromfrom = {
			if = {
				limit = {
					is_ai = no
					nor = {
						has_global_flag = human_fallen_empires_future_in_expansion
						has_country_flag = human_fallen_empires_future_contacted
					}
				}
				country_event = {
					id = human_fallen_empires.7
				}
				set_country_flag = human_fallen_empires_future_contacted
			}
		}
	}
}

# Main dialoge future
country_event = {
	id = human_fallen_empires.7
	title = TRANSMISSION
	desc = "human_fallen_empires.desc"

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:egypt_empire
		planet_background = event_target:egypt_empire
		graphical_culture = event_target:egypt_empire
		city_level = event_target:egypt_empire
		room = event_target:egypt_empire
	}

	immediate = {

	}

	option = {
		name = human_fallen_empires.5.a
		response_text = human_fallen_empires.5.a.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5.b
		response_text = human_fallen_empires.5.b.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5.c
		response_text = human_fallen_empires.5.c.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5.e
		response_text = human_fallen_empires.e.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.5.d
		response_text = human_fallen_empires.d.response
	}
}

# egypt is in expansion
event = {
	id = human_fallen_empires.10
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		any_country = {
			is_country_type = default
			fleet_power > 30000
		}
		not = { has_global_flag = human_fallen_empires_egypt_in_expansion }
	}

	immediate = {
		random_country = {
			limit = { has_country_flag = human_fallen_empires_egypt }
			country_event = {
				id = human_fallen_empires.11
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.11
	title = OK
	desc = OK
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = "egypt_fallen_empire_unkeep"
				days = -1
			}
		}
		add_modifier = {
			modifier = "egypt_fallen_empire_navy_size"
			days = 3650
		}
		country_add_ethic = "ethic_xenophobe"
		every_owned_pop = {
			pop_add_ethic = "ethic_xenophobe"
			pop_add_ethic = "ethic_fanatic_spiritualist"
		}
		set_country_type = default
		set_global_flag = human_fallen_empires_egypt_in_expansion
		save_event_target_as = egypt_empire
		ruler = {
			save_event_target_as = egypt_empire_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:egypt_empire
			if = {
				limit = { is_ai = no }
				country_event = {
					id = human_fallen_empires.12
				}
				set_country_flag = human_fallen_empires_egypt_contacted
			}
		}
	}
}

# dialoge 2
country_event = {
	id = human_fallen_empires.12
	title = human_fallen_empires.12
	desc = "human_fallen_empires.12.desc"

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:egypt_empire_ruler
		planet_background = event_target:egypt_empire
		graphical_culture = event_target:egypt_empire
		city_level = event_target:egypt_empire
		room = event_target:egypt_empire
	}

	immediate = {

	}

	option = {
		name = human_fallen_empires.12.0
	}
}

# future is in expansion
event = {
	id = human_fallen_empires.13
	title = OK
	desc = OK
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

    trigger = {
		any_country = {
			is_country_type = default
			fleet_power > 50000
		}
		not = { has_global_flag = human_fallen_empires_future_in_expansion }
	}

	immediate = {
		random_country = {
			limit = { has_country_flag = human_fallen_empires_future }
			country_event = {
				id = human_fallen_empires.14
			}
		}
	}
}

country_event = {
	id = human_fallen_empires.14
	title = OK
	desc = OK
	hide_window = yes

	is_triggered_only = yes

	immediate = {
		every_owned_ship = {
			repair_ship = yes
			add_modifier = {
				modifier = "egypt_fallen_empire_unkeep"
				days = -1
			}
		}
		add_modifier = {
			modifier = "egypt_fallen_empire_navy_size"
			days = 3650
		}
		country_remove_ethic = "ethic_fanatic_xenophile"
		country_add_ethic = "ethic_fanatic_militarist"
		every_owned_pop = {
			pop_remove_ethic = "ethic_fanatic_xenophile"
			pop_add_ethic = "ethic_fanatic_militarist"
		}
		kill_leader = {
			type = ruler
			show_notification = no 
		}
		set_country_type = default
		change_government = "martial_demarchy"
		set_empire_name = "Kad Republic"
		set_global_flag = human_fallen_empires_future_in_expansion
		save_event_target_as = future_empire
		ruler = {
			save_event_target_as = future_empire_ruler
		}
		every_country = {
			establish_communications_no_message = event_target:future_empire
			if = {
				limit = { is_ai = no }
				country_event = {
					id = human_fallen_empires.15
				}
			}
		}
	}
}

# Incoming Transmission
country_event = {
	id = human_fallen_empires.15
	title = TRANSMISSION
	desc = "human_fallen_empires.15.desc"

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:future_empire_ruler
		planet_background = event_target:future_empire
		graphical_culture = event_target:future_empire
		city_level = event_target:future_empire
		room = event_target:future_empire
	}

	immediate = {

	}

	option = {
		name = human_fallen_empires.15.1
	#	response_text = human_fallen_empires.15.1.response
	}
}


# anomalys

# wormhole to ju ahet
ship_event = {
	id = human_fallen_empires.50
	title = "human_fallen_empires.50.name"
	desc = "human_fallen_empires.50.desc"
	picture = GFX_evt_human_fallen_empires_wormhole
	show_sound = event_ship_thrusters
	location = root

    is_triggered_only = yes

	immediate = {
		random_country = {
			limit = {
				has_country_flag = human_fallen_empires_egypt
			}
			save_event_target_as = egypt_empire
			random_owned_planet = {
				limit = { is_capital = yes }
				save_event_target_as = human_fallen_empires_ra_home
			}
			establish_communications = root.owner
		}
		fleet = {
			set_location = {
				target = event_target:human_fallen_empires_ra_home
				distance = 5
				angle = random 
			}
		}
	}

	option = {
		name = human_fallen_empires.50.0
		hidden_effect = {
			root.owner = {
				country_event = {
					id = human_fallen_empires.5
				}
			}
		}
	}
}


## varelse section


## varlse colony after curvey
ship_event = {
	id = human_fallen_empires.100
	title = "human_fallen_empires.100.name"
	desc = "human_fallen_empires.100.desc"
	picture = GFX_evt_city_ruins
	location = root

    is_triggered_only = yes
	
	trigger = {
		from = { has_planet_flag = human_fallen_empires_varelse_colony }
	}

	option = {
		name = human_fallen_empires.100.0
	}
}


## observation outpost events


## varelse mehanicus

#start event 
planet_event = {
	id = human_fallen_empires.101
	hide_window = yes

	trigger = {
		has_observation_outpost = yes
		has_planet_flag = human_fallen_empires_varelse_colony
		observation_outpost_owner = {
			not = { has_country_flag = varelse_mehanicus }
			is_ai = no
		}
	}

	mean_time_to_happen = {
		months = 24
	}

	immediate = {
		observation_outpost_owner = {
			country_event = { id = human_fallen_empires.102 }
			set_country_flag = varelse_mehanicus
		}
		save_event_target_as = human_fallen_empires_varelse_colony
	}
}

# choice
country_event = {
	id = human_fallen_empires.102
	title = "human_fallen_empires.102.name"
	desc = "human_fallen_empires.102.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_ship_thrusters			# need sound
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.102.0"
		hidden_effect = {
			country_event = { id = human_fallen_empires.103 days = 12 random = 4 }				#lets go to artifact
		}
	}
	option = {
		name = "human_fallen_empires.102.1"
		hidden_effect = {
			if = {
				limit = {
					OR = {
						has_ethic = "ethic_xenophobe"
						has_ethic = "ethic_fanatic_xenophobe"
					}
				}
				country_event = { id = human_fallen_empires.105 days = 10 random = 5 }			#lets go to factory and destroy it
				else = {
					country_event = { id = human_fallen_empires.106 days = 11 random = 5 }		#lets go to factory
				}
			}
		}
	}
	option = {
		name = "human_fallen_empires.102.2"
		trigger = {
			or = {
				has_ethic = "ethic_materialist"
				has_ethic = "ethic_fanatic_materialist"
			}
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.107 days = 100 random = 20 }			#lets revolt (materialist)
		}
	}
	option = {
		name = "human_fallen_empires.102.3"
		trigger = {
			from = {
				observation_outpost = { has_mission = covert_infiltration }
			}
		}
		hidden_effect = {
			country_event = { id = human_fallen_empires.108 days = 100 random = 20 }			#lets infiltrat
		}
	}
	option = {																					#nothing
		name = "human_fallen_empires.102.4"
	}
}

# lets go to artifact
country_event = {
	id = human_fallen_empires.103
	title = "human_fallen_empires.103.name"
	desc = "human_fallen_empires.103.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_mystic_reveal
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires_at_the_sreen"
		hidden_effect = {
			country_event = { id = human_fallen_empires.104 }
		}
	}
}

# history of varelse
country_event = {
	id = human_fallen_empires.104
	title = "human_fallen_empires.104.name"
	desc = "human_fallen_empires.104.desc"
	diplomatic = yes
	is_triggered_only = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	option = {
		name = human_fallen_empires.104.0
		response_text = human_fallen_empires.104.0.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.1
		response_text = human_fallen_empires.104.1.response
		is_dialog_only = yes
	}
	option = {
		name = human_fallen_empires.104.2
		response_text = human_fallen_empires.104.2.response
		add_monthly_resource_mult = {
			resource = physics_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# lets go to factory
country_event = {
	id = human_fallen_empires.105
	title = "human_fallen_empires.105.name"
	desc = "human_fallen_empires.105.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_ship_thrusters			# need sound
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires_good_job"
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# lets go to factory and destroy it
country_event = {
	id = human_fallen_empires.106
	title = "human_fallen_empires.105.name"
	desc = "human_fallen_empires.106.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_ship_thrusters			# need sound
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			owner = {
				down_primitive_teh_lvl = yes
			}
			every_tile = {
				limit = { has_building = yes }
				set_ruined = yes
			}
			random_pop = {
				kill_pop = yes
			}
			random_pop = {
				kill_pop = yes
			}
		}
	}

	option = {
		name = "human_fallen_empires.106.0"
		trigger = {
			OR = {
				has_ethic = "ethic_xenophobe"
				has_ethic = "ethic_fanatic_xenophobe"
			}
		}
		add_monthly_resource_mult = {
			resource = engineering_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# materialist result lets revolt
country_event = {
	id = human_fallen_empires.107
	title = "human_fallen_empires.107.name"
	desc = "human_fallen_empires.107.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_ship_thrusters			# need sound
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			owner = {
				up_primitive_teh_lvl = yes
				country_remove_ethic = "ethic_spiritualist"
				country_add_ethic = "ethic_materialist"
				every_owned_pop = {
					pop_remove_ethic = "ethic_spiritualist"
					pop_add_ethic = "ethic_materialist"
				}
			}
		}
	}

	option = {
		name = "human_fallen_empires.107.0"
		trigger = {
			OR = {
				has_ethic = "ethic_materialist"
				has_ethic = "ethic_fanatic_materialist"
			}
		}
		add_monthly_resource_mult = {
			resource = society_research
			value = @tier2researchreward
			min = @tier2researchmin
			max = @tier2researchmax
		}
	}
}

# lets infiltrat
country_event = {
	id = human_fallen_empires.108
	title = "human_fallen_empires.108.name"
	desc = "human_fallen_empires.108.desc"
	picture = GFX_evt_landing_ship				# need pic
	show_sound = event_ship_thrusters			# need sound
	location = event_target:human_fallen_empires_varelse_colony

	is_triggered_only = yes

	immediate = {
		event_target:human_fallen_empires_varelse_colony = {
			observation_outpost = { add_mission_progress = 0.3 }
		}
	}

	option = {
		name = "human_fallen_empires_good_job"
	}
}


## memorial section


## pyramid events

# start
planet_event = {
	id = human_fallen_empires.150
	title = "human_fallen_empires.150.name"
	desc = "human_fallen_empires.150.desc"
	picture = GFX_evt_underground_civilization
	show_sound = event_mystic_reveal
	location = ROOT
	is_triggered_only = yes

	trigger = {
		not = { has_planet_flag = human_fallen_empires_planet_pyramid }
		is_planet_class = pc_human_fallen_empires_memorial
		has_owner = yes
		owner = { is_ai = no }
		has_ground_combat = no
		num_pops > 0
	}

	immediate = {
		set_planet_flag = human_fallen_empires_planet_pyramid
	}

	option = {
		name = "human_fallen_empires.150.0"
		enable_special_project = {
			name = "human_fallen_empires_pyramid_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}
	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# golocube
ship_event = {
	id = human_fallen_empires.151
	title = "human_fallen_empires.151.name"
	desc = "human_fallen_empires.151.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.151.0"
		hidden_effect = {
			root.owner = {
				country_event = { id = human_fallen_empires.152 }
				set_country_flag = human_fallen_empires_pyramid_events_1
			}
		}
	}
}

# memorial story
country_event = {
	id = human_fallen_empires.152
	title = "human_fallen_empires.152.name"
	desc = "human_fallen_empires.152.desc"

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		room = no_video_feed_room
	}

	option = {
		name = country.256.a
		response_text = country.256.a.response
		is_dialog_only = yes
	}
	option = {
		name = country.256.b
		response_text = country.256.b.response
		is_dialog_only = yes
	}
	option = {
		name = country.256.c
		response_text = country.256.c.response
		is_dialog_only = yes
	}
	option = {
		name = country.256.d
		response_text = country.256.d.response
		is_dialog_only = yes
	}
	option = {
		name = country.256.e
		response_text = country.256.e.response
	}
}

# obelisk
ship_event = {
	id = human_fallen_empires.153
	title = "human_fallen_empires.153.name"
	desc = "human_fallen_empires.153.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_pyramid_events_2 }
		event_target:human_fallen_empires_memorial_planet = {
			create_country = {
				name = "Gnosis"
				type = faction
				effect = {
					establish_communications_no_message = root.owner
				}
			}
			create_species = {
				name = "Gnosis"
				class = random
				portrait = random
				traits = random
			}
			# запилить новый тип армии
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_guardian_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
			create_army = {
				name = "Gnosis"
				owner = last_created
				species = last_created
				type = "titanic_assault_army"
			}
		}
	}

	option = {
		name = "human_fallen_empires.153.0"
	}
}

# plague
ship_event = {
	id = human_fallen_empires.154
	title = "human_fallen_empires.154.name"
	desc = "human_fallen_empires.154.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_pyramid_events_3 }
		event_target:human_fallen_empires_memorial_planet = {
			planet_event = { id = colony.2035 days = 15 }
		}
	}

	option = {
		name = "human_fallen_empires.154.0"
	}
	#скопировать ванильный эвент с чумой
}

# tomb
ship_event = {
	id = human_fallen_empires.155
	title = "human_fallen_empires.155.name"
	desc = "human_fallen_empires.155.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_pyramid_events_4 }
	}

	option = {
		name = "human_fallen_empires.155.0"
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					50 = { add_modifier = { modifier = "human_fallen_empires_tomb_happy" days = 360 } }
					50 = { add_modifier = { modifier = "human_fallen_empires_tomb_unhappy" days = 360 } }
				}
			}
		}
		# нужно добавить штраф к отношениям
	}
}


## military warehouse events

# start
planet_event = {
	id = human_fallen_empires.200
	title = "human_fallen_empires.200.name"
	desc = "human_fallen_empires.200.desc"
	picture = GFX_evt_underground_civilization
	show_sound = event_mystic_reveal
	location = ROOT

	trigger = {
		not = { has_planet_flag = human_fallen_empires_military_warehouse_planet }
		is_planet_class = pc_human_fallen_empires_memorial
		has_owner = yes
		owner = { is_ai = no }
		has_ground_combat = no
		num_pops > 0
	}

	is_triggered_only = yes

	immediate = {
		set_planet_flag = human_fallen_empires_military_warehouse_planet
	}

	option = {
		name = "human_fallen_empires.200.0"
		enable_special_project = {
			name = "human_fallen_empires_military_warehouse_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# defense system
ship_event = {
	id = human_fallen_empires.201
	title = "human_fallen_empires.201.name"
	desc = "human_fallen_empires.201.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_1 }
	}

	option = {
		name = "human_fallen_empires.201.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = { modifier = "human_fallen_empires_army_planet_defense_damage_mult" days = -1 }
		}
	}
}

# abandoned armory
ship_event = {
	id = human_fallen_empires.202
	title = "human_fallen_empires.202.name"
	desc = "human_fallen_empires.202.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_2 }
	}

	option = {
		name = "human_fallen_empires.202.0"
		owner = {
			add_modifier = { modifier = "human_fallen_empires_army_attack_damage_mult" days = -1 }
		}
	}
}

# abandoned librari
ship_event = {
	id = human_fallen_empires.203
	title = "human_fallen_empires.203.name"
	desc = "human_fallen_empires.203.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_3 }
	}

	option = {
		name = "human_fallen_empires.203.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = { modifier = "human_fallen_empires_army_defense_damage_mult" days = -1 }
		}
	}
}

# abandoned military academy
ship_event = {
	id = human_fallen_empires.204
	title = "human_fallen_empires.204.name"
	desc = "human_fallen_empires.204.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_4 }
	}

	option = {
		name = "human_fallen_empires.204.0"
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = { modifier = "human_fallen_empires_army_academy" days = -1 }
		}
	}
}

# explosion of the warehouse scientist survived
ship_event = {
	id = human_fallen_empires.205
	title = "human_fallen_empires.205.name"
	desc = "human_fallen_empires.205.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_5 }
	}

	option = {
		name = "human_fallen_empires.205.0"
	}
}

# explosion of the warehouse scientist wounded
ship_event = {
	id = human_fallen_empires.206
	title = "human_fallen_empires.206.name"
	desc = "human_fallen_empires.206.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		fleet = { exile_leader_as = human_fallen_empires_scientist_wounded }
		owner = {
			country_event = { id = human_fallen_empires.210 days = 180 }
			set_country_flag = human_fallen_empires_military_warehouse_events_5
		}
	}

	option = {
		name = "human_fallen_empires.206.0"
	}
}

# explosion of the warehouse scientist recovered
country_event = {
	id = human_fallen_empires.210
	title = "human_fallen_empires.210.name"
	desc = "human_fallen_empires.210.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
#	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		set_leader = human_fallen_empires_scientist_wounded
	}

	option = {
		name = "human_fallen_empires.210.0"
	}
}

# explosion of the warehouse scientist dead
ship_event = {
	id = human_fallen_empires.207
	title = "human_fallen_empires.207.name"
	desc = "human_fallen_empires.207.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		kill_leader = {	type = scientist show_notification = no }
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_5 }
	}

	option = {
		name = "human_fallen_empires.207.0"
	}
}

# scientific bonus of the warehouse
ship_event = {
	id = human_fallen_empires.208
	title = "human_fallen_empires.208.name"
	desc = "human_fallen_empires.208.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.208.0"
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
			set_country_flag = human_fallen_empires_military_warehouse_events_6
		}
	}
}

# dr moro
ship_event = {
	id = human_fallen_empires.209
	title = "human_fallen_empires.209.name"
	desc = "human_fallen_empires.209.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		owner = { set_country_flag = human_fallen_empires_military_warehouse_events_7 }
	}

	option = {
		name = "human_fallen_empires.209.0"
	#	hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				add_modifier = { modifier = "human_fallen_empires_tomb_unhappy" days = 360 }
			}
	#	}
	}
}


## found cruiser

# start
planet_event = {
	id = human_fallen_empires.250
	title = "human_fallen_empires.250.name"
	desc = "human_fallen_empires.250.desc"
	picture = GFX_evt_underground_civilization
	show_sound = event_mystic_reveal
	location = ROOT

	trigger = {
		not = { has_planet_flag = human_fallen_empires_found_cruiser_planet }
		is_planet_class = pc_human_fallen_empires_memorial
		has_owner = yes
		owner = { is_ai = no }
		has_ground_combat = no
		num_pops > 0
	}

	is_triggered_only = yes

	immediate = {
		set_planet_flag = human_fallen_empires_found_cruiser_planet
	}

	option = {
		name = "human_fallen_empires.250.0"
		enable_special_project = {
			name = "human_fallen_empires_found_cruiser_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# rotten skeleton
ship_event = {
	id = human_fallen_empires.251
	title = "human_fallen_empires.251.name"
	desc = "human_fallen_empires.251.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.251.0"
		owner = {
			add_monthly_resource_mult = {
				resource = minerals
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
	}
	option = {
		name = "human_fallen_empires.251.1"
		owner = {
			#add_modifier = { modifier = "human_fallen_empires_ship_weapon_range_mult" days = -1 }
			add_monthly_resource_mult = {
				resource = energy
				value = @tier2materialreward
				min = @tier2materialmin
				max = @tier2materialmax
			}
		}
	}
	option = {
		name = "human_fallen_empires.251.2"
		owner = {
			add_monthly_resource_mult = {
				resource = physics_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}

# explosion on the cruiser scientist dead
ship_event = {
	id = human_fallen_empires.252
	title = "human_fallen_empires.252.name"
	desc = "human_fallen_empires.252.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = "human_fallen_empires.252.0"
		hidden_effect = {
			kill_leader = {	type = scientist show_notification = no }
		}
	}
}

# runaway cruiser
ship_event = {
	id = human_fallen_empires.253
	title = "human_fallen_empires.253.name"
	desc = "human_fallen_empires.253.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		create_country = {
			name = "Cruiser"
			type = faction
		}
		last_created_country = {
			create_fleet = { name = "Cruiser"}
			save_event_target_as = human_fallen_empires_cruiser
			last_created_fleet = {
				set_owner = prev
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_location = root
				set_fleet_stance = aggressive
				queue_actions = {
					find_closest_system = {
						trigger = {
							id = "human_fallen_empires.253.trigger.0"
							any_planet = {
								has_planet_flag = human_fallen_empires_varelse_colony
							}
						}
						found_system = {
							move_to = THIS
						}
					}
					find_closest_planet = {
						trigger = {
							id = "human_fallen_empires.253.trigger.1"
							has_planet_flag = human_fallen_empires_varelse_colony
						}
						found_planet = {
							orbit_planet = THIS
							effect = {
								id = "human_fallen_empires.253.effect.0"
								event_target:human_fallen_empires_cruiser = {
									set_faction_hostility = { set_hostile = yes }
								}
							}
							repeat = {
							#	trigger = {
							#		id = "human_fallen_empires.253.trigger.2"
							#		this = {
							#			num_pops > 0
							#		}
							#	}
								wait = 100
							}
						}
					}
				}
			}
		establish_communications_no_message = root.owner
		}
	}

	option = {
		name = "human_fallen_empires.253.0"
	}
}

# The cruiser has acquired a mind and became aggressive
ship_event = {
	id = human_fallen_empires.254
	title = "human_fallen_empires.254.name"
	desc = "human_fallen_empires.254.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		save_event_target_as = cruiser_target
		create_country = {
			name = "Mad Cruiser"
			type = faction
		}
		last_created_country = {
			create_fleet = { name = "Mad Cruiser"}
			last_created_fleet = {
				set_owner = prev
				create_ship = {
					name = random
					design = "Seth"
					graphical_culture = "mammalian_01"
					prefix = no
				}
				set_fleet_stance = aggressive
				set_location = root
				queue_actions = {
					repeat = {
						find_closest_system = {
							trigger = {
								id = "human_fallen_empires.254.trigger.0"
								any_planet = {
									OR = {
										has_mining_station = yes
										has_research_station = yes
									}
									exists = controller
									controller = { is_same_value = event_target:cruiser_target }
								}
							}
							found_system = {
								move_to = THIS
							}
						}
						find_closest_planet = {
							trigger = {
								id = "human_fallen_empires.254.trigger.1"
								OR = {
									has_mining_station = yes
									has_research_station = yes
								}
							}
							found_planet = {
								orbit_planet = THIS
								wait = {
									duration = 20
								}
							}
						}
					}
				}
			}
			set_faction_hostility = { set_hostile = yes }
			establish_communications_no_message = root.owner
		}
	}

	option = {
		name = "human_fallen_empires.254.0"
	}
}

# The cruiser has acquired a mind and became aggressive scientist on ship
ship_event = {
	id = human_fallen_empires.255
	title = "human_fallen_empires.255.name"
	desc = "human_fallen_empires.255.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = INTERESTING
		hidden_effect = {
			kill_leader = {	type = scientist show_notification = no }
			create_country = {
				name = "Mad Cruiser"
				type = faction
			}
			last_created_country = {

				create_fleet = { name = "Mad Cruiser"}
				last_created_fleet = {
					set_owner = prev
					create_ship = {
						name = random
						design = "Death's Head"
						graphical_culture = "mammalian_01"
						prefix = no
					}
					set_location = root
				}
				set_faction_hostility = { set_hostile = yes }
			}
		}
	}
}

# love is
ship_event = {
	id = human_fallen_empires.256
	title = "human_fallen_empires.256.name"
	desc = "human_fallen_empires.256.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		create_fleet = { name = "Cruiser"}
		last_created_fleet = {
			set_owner = root.owner
			create_ship = {
				name = "Marvin"
				design = "Seth"
				graphical_culture = "mammalian_01"
				prefix = no
			}
			last_created_ship = {
				add_modifier = { modifier = "human_fallen_empires_ship_weapon_range_mult" days = -1 }
			}
			set_location = root
			set_fleet_stance = aggressive
		}
	}

	option = {
		name = "human_fallen_empires.256.0"
	}
}

# new cruiser
ship_event = {
	id = human_fallen_empires.257
	title = "human_fallen_empires.257.name"
	desc = "human_fallen_empires.257.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	immediate = {
		create_fleet = { name = "Cruiser"}
		last_created_fleet = {
			set_owner = root.owner
			create_ship = {
				name = random
				design = "Seth"
				graphical_culture = "mammalian_01"
				prefix = no
			}
			set_location = root
			set_fleet_stance = aggressive
		}
	}

	option = {
		name = "human_fallen_empires.257.0"
	}
}


## sputnik

# start
planet_event = {
	id = human_fallen_empires.300
	title = "human_fallen_empires.300.name"
	desc = "human_fallen_empires.300.desc"
	picture = GFX_evt_underground_civilization
	show_sound = event_mystic_reveal
	location = root

	trigger = {
		not = { has_planet_flag = human_fallen_empires_sputnik_planet }
		is_planet_class = pc_human_fallen_empires_memorial
		has_owner = yes
		owner = { is_ai = no }
		has_ground_combat = no
		num_pops > 0
	}

	is_triggered_only = yes

	immediate = {
		set_planet_flag = human_fallen_empires_sputnik_planet
	}

	option = {
		name = "human_fallen_empires.300.0"
		enable_special_project = {
			name = "human_fallen_empires_sputnik_project"
			location = root
			owner = root.owner
		}
		save_event_target_as = human_fallen_empires_memorial_planet
	}

	option = {
		name = "human_fallen_empires_not_interested"
	}
}

# bonus to the sensors
ship_event = {
	id = human_fallen_empires.301
	title = "human_fallen_empires.301.name"
	desc = "human_fallen_empires.301.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = human_fallen_empires.301.0
		event_target:human_fallen_empires_memorial_planet = {
			add_modifier = { modifier = "human_fallen_empires_army_attack_damage_mult" days = -1 }
		}
	}
}

# go to another events
ship_event = {
	id = human_fallen_empires.302
	title = "human_fallen_empires.302.name"
	desc = "human_fallen_empires.302.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = human_fallen_empires.302.0
		hidden_effect = {
			event_target:human_fallen_empires_memorial_planet = {
				random_list = {
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_planet_pyramid
						}
						planet_event = { id = human_fallen_empires.150 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_military_warehouse_planet
						}
						planet_event = { id = human_fallen_empires.200 days = 1 }
					}
					33 = {
						modifier = {
							factor = 0
							has_planet_flag = human_fallen_empires_found_cruiser_planet
						}
						planet_event = { id = human_fallen_empires.250 days = 1 }
					}
					1 = {
						root = {
							ship_event = { id = human_fallen_empires.303 days = 15 }
						}
					}
				}
			}
		}
	}
	option = {
		name = human_fallen_empires.302.1
	}
}

# go to nothing
ship_event = {
	id = human_fallen_empires.303
	title = "human_fallen_empires.303.name"
	desc = "human_fallen_empires.303.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = human_fallen_empires.303.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier1researchreward
				min = @tier1researchmin
				max = @tier1researchmax
			}
		}
	}
}

# go to nothing
ship_event = {
	id = human_fallen_empires.304
	title = "human_fallen_empires.304.name"
	desc = "human_fallen_empires.304.desc"
	picture = GFX_evt_archaeological_dig
	show_sound = event_airlock
	location = event_target:human_fallen_empires_memorial_planet

	is_triggered_only = yes

	option = {
		name = human_fallen_empires.304.0
		owner = {
			add_monthly_resource_mult = {
				resource = engineering_research
				value = @tier3researchreward
				min = @tier3researchmin
				max = @tier3researchmax
			}
		}
	}
}


## find sol
# Scope = Ship
# From = System
# FromFrom = Country
# also owner, obv
ship_event = {
	id = human_fallen_empires.350
	title = human_fallen_empires.350.name
	desc = {
		trigger = {
			hidden:owner = {
				switch = {
					trigger = has_country_flag

					human_fallen_empires_marked_as_human = { text = human_fallen_empires.350.desc }
					default = { text = human_fallen_empires.350.desc.1 }
				}
			}
		}
	}
	picture = GFX_evt_continental	# поменять картинку
	show_sound = event_scanner
	location = FROM

	is_triggered_only = yes

	trigger = {
		from = { has_star_flag = human_fallen_empires_sol_target }
		owner = { has_country_flag = human_fallen_empires_sol_search }
	}

	immediate = {
		from = { remove_star_flag = human_fallen_empires_sol_target }
		owner = {
			remove_country_flag = human_fallen_empires_sol_search
			add_event_chain_counter = { 
				event_chain = "human_fallen_empires_find_sol_chain" 
				counter = "found" 
				amount = 1 
			}
		}
	}

	option = {
		name = human_fallen_empires.350.0
		trigger = {
			owner = {
				has_country_flag = human_fallen_empires_marked_as_human
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
			end_event_chain = "human_fallen_empires_find_sol_chain"
		}
	}
	option = {
		name = human_fallen_empires.350.1
		trigger = {
			owner = {
				# добавить ксенофилию
				not = { has_country_flag = human_fallen_empires_marked_as_human }
			}
		}
		owner = {
			add_monthly_resource_mult = {
				resource = influence
				value = @tier2influencereward
				min = @tier2influencemin
				max = @tier2influencemax
			}
			end_event_chain = "human_fallen_empires_find_sol_chain"
		}
	}
}